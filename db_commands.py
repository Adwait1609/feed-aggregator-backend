#!/usr/bin/env python3
"""
Database Commands Summary for RSS Feed Reader
All the commands you need to inspect and manage your database
"""

def show_commands():
    print("ğŸ—„ï¸  RSS FEED READER - DATABASE COMMANDS SUMMARY")
    print("=" * 80)
    
    print("ğŸ“‚ DATABASE LOCATION:")
    print("=" * 50)
    print("âœ… Database file: news_aggregator.db")
    print("ğŸ“ Location: ./news_aggregator.db (in project root)")
    print("ğŸ“Š Type: SQLite3 database")
    print("ğŸ”§ Configuration: utils/config.py (database_url)")
    print()
    
    print("ğŸ” INSPECT DATABASE:")
    print("=" * 50)
    print("1. Full database inspection:")
    print("   uv run python db_inspector.py")
    print("   Shows: file info, tables, users, feeds, articles, recent activity")
    print()
    print("2. Check feed crawl status:")
    print("   uv run python feed_tracker.py status")
    print("   Shows: last crawled times in nice format")
    print()
    print("3. Monitor feeds and articles:")
    print("   uv run python monitor.py status")
    print("   Shows: feed status and next crawl times")
    print()
    
    print("ğŸ”„ MANAGE FEEDS:")
    print("=" * 50)
    print("1. Update CSV tracker:")
    print("   uv run python feed_tracker.py update")
    print()
    print("2. Force crawl a feed:")
    print("   uv run python monitor.py crawl TechCrunch")
    print("   uv run python monitor.py crawl 1  # by feed ID")
    print()
    print("3. Show recent articles:")
    print("   uv run python monitor.py articles 10")
    print()
    
    print("ğŸ’» DATABASE QUERIES (Python):")
    print("=" * 50)
    print("Run Python commands to query database:")
    print()
    print("# Check users")
    print("uv run python -c \"")
    print("from database.connection import get_db")
    print("from models.user import User")
    print("session = next(get_db())")
    print("users = session.query(User).all()")
    print("for u in users: print(f'{u.id}: {u.username} ({u.email})')")
    print("session.close()\"")
    print()
    print("# Check feeds")
    print("uv run python -c \"")
    print("from database.connection import get_db")
    print("from models.feed import RSSFeed")
    print("session = next(get_db())")
    print("feeds = session.query(RSSFeed).all()")
    print("for f in feeds: print(f'{f.id}: {f.name} - {f.url}')")
    print("session.close()\"")
    print()
    print("# Count articles")
    print("uv run python -c \"")
    print("from database.connection import get_db")
    print("from models.article import Article")
    print("session = next(get_db())")
    print("count = session.query(Article).count()")
    print("print(f'Total articles: {count}')")
    print("session.close()\"")
    print()
    
    print("ğŸƒ SERVER & BACKGROUND JOBS:")
    print("=" * 50)
    print("1. Start server (this starts background jobs):")
    print("   uv run python main.py")
    print("   âœ… Background jobs will run automatically")
    print("   âœ… CSV file will update when feeds are crawled")
    print("   âœ… Database will get new articles")
    print()
    print("2. Job status explanation:")
    print("   uv run python job_info.py")
    print()
    
    print("ğŸ“ FILE LOCATIONS:")
    print("=" * 50)
    print("ğŸ—„ï¸  news_aggregator.db        - Main SQLite database")
    print("ğŸ“Š feed_crawl_times.csv       - Feed crawl tracking CSV")
    print("âš™ï¸  utils/config.py            - Database configuration")
    print("ğŸ”§ database/connection.py     - Database connection setup")
    print("ğŸ“‹ models/                    - Database table definitions")
    print()
    
    print("âš ï¸  IMPORTANT NOTES:")
    print("=" * 50)
    print("â€¢ Background jobs ONLY run when server is running")
    print("â€¢ Stop server with Ctrl+C (this stops jobs too)")
    print("â€¢ CSV file updates automatically during crawls")
    print("â€¢ Database grows as more articles are added")
    print("â€¢ Each user has their own feeds and articles")
    print()
    
    print("ğŸ”§ TROUBLESHOOTING:")
    print("=" * 50)
    print("â€¢ No database file? Run: uv run python main.py (creates it)")
    print("â€¢ No articles? Check if feeds were crawled recently")
    print("â€¢ CSV not updating? Make sure server is running")
    print("â€¢ Want fresh start? Delete news_aggregator.db and restart")
    print()
    
    print("ğŸ’¡ QUICK TIPS:")
    print("=" * 50)
    print("âœ… Daily workflow:")
    print("  1. uv run python main.py        # Start server")
    print("  2. Keep it running for auto-crawling")
    print("  3. uv run python feed_tracker.py status  # Check progress")
    print()
    print("âœ… Database inspection:")
    print("  1. uv run python db_inspector.py")
    print("  2. uv run python monitor.py articles 5")
    print()
    print("âœ… Testing:")
    print("  1. uv run python monitor.py crawl TechCrunch")
    print("  2. uv run python feed_tracker.py status")


if __name__ == "__main__":
    show_commands()
